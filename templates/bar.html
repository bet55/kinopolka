{% extends "based_layout.html" %}

{% load static %}

{% block style %}
    <link rel="stylesheet" href="{% static 'css/bar.css' %}">
{% endblock %}

{% block title %}Бар{% endblock %}


{# коктейли #}
{% block center-content %}
    <div id="cocktails">
        <h2>Коктейли</h2>
        <button class="add">+ добавить</button>
        <ul id="cocktails-list">
            {% for c in cocktails %}
                <li class="cocktail" data-available="{{ c.is_available }}">
                    <img src="{{ c.image }}" alt="">
                    <div class="description">
                        <h3>{{ c.name }}</h3>
                        <ul class="cocktail-ingredients">
                            {% for ci in c.ingredients %}
                                <li>
                                    <span>{{ ci.ingredient.name }}</span>
                                    <span>{{ ci.amount }}</span>
                                    <span>{{ ci.unit }}</span>
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                    {#                    <p class="instruction">#}
                    {#                        {{ c.instructions }}#}
                    {#                    </p>#}
                </li>
            {% endfor %}
        </ul>


    </div>

{% endblock %}

{# ингредиенты #}
{% block right-content %}
    <div id="ingredients">
        <h2>Ингредиенты</h2>
        <button class="add">+ добавить</button>

        <!-- Форма для добавления нового ингредиента (изначально скрыта) -->
        <div id="new-ingredient-form" class="hide">
            <form id="ingredient-form" method="post" enctype="multipart/form-data">
                <div class="form-header">
                    <button type="button" class="close-btn">&times;</button>
                </div>
                <div class="form-row">
                    <div class="image-upload">
                        <label for="ingredient-image" class="image-upload-label">
                            <span>+</span>
                            <img id="image-preview" class="hide" alt="">
                            <input type="file" id="ingredient-image" name="image" accept="image/*">
                        </label>
                    </div>
                    <div class="fields-group">
                        <div class="form-group">
                            <input type="text" id="ingredient-name" name="name" placeholder="название" required>
                            <label for="ingredient-name"></label>
                        </div>
                        <div class="form-group availability">
                            <input type="checkbox" id="ingredient-available" name="is_available">
                            <label for="ingredient-available">в наличии</label>
                        </div>
                    </div>
                    <button type="submit" class="save-btn">Сохранить</button>
                </div>
            </form>
        </div>

        <ul id="ingredients-list">
            {% for i in ingredients %}
                <li class="ingredient" data-availabe="{{ i.is_available }}" data-ingredient-id="{{ i.id }}">
                    <img src="{{ i.image }}" alt="">
                    <h6>{{ i.name }}</h6>
                    <button type="button" class="update"><img src="{% static 'img/bar/box.png' %}" alt=""></button>
                    <button type="button" class="remove">&times;</button>
                </li>
            {% endfor %}
        </ul>
    </div>
{% endblock %}



{# Подключаем js #}
{% block script %}
    <script type="module" src="{% static 'js/bar.js' %}"></script>
{% endblock %}
