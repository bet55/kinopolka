{% extends "based_layout.html" %}

{% load static %}

{% block style %}
    <link rel="stylesheet" href="{% static 'css/features/statistic.css' %}">
{% endblock %}
{% block title %}Статистика{% endblock %}

{% block center-content %}

    <div id="main-container">
        {% for rate_name, rate_movies in movies_rating.items %}

            <div class="row movies-container">

                <h2>{{ rate_name }}</h2>
                {% for m in rate_movies %}

                    <div class="movie" data-kp-id="{{ m.kp_id }}">
                        <div class="poster-container">
                            <img src="{{ m.poster_local }}" alt="" loading="lazy" data-kp-id="{{ m.kp_id }}">
                            <span>{{ m.rating }}</span>
                        </div>

                        <h4>{{ m.name }}</h4>
                    </div>

                {% endfor %}
            </div>

            <br>
        {% endfor %}

    </div>





    {#    <div class="graph">#}
    {#        {{ graph_div|safe }}#}
    {#    </div>#}
{% endblock %}

{% block right-content %}

    <div id="stats">
        <h3>Общее</h3>
        <table>
            <tbody>
            {% for stat_name, stat in statistic.items %}
                <tr>
                    <td>{{ stat_name }}</td>
                    <td>{{ stat }}</td>
                </tr>
            {% endfor %}
            </tbody>

        </table>
    </div>
    <br>

    <div id="genres">
        <h3>Жанры</h3>
        {% autoescape off %} {{ genres_table }} {% endautoescape %}
    </div>



{% endblock %}